[gd_scene load_steps=3 format=3 uid="uid://vignetteoverlay"]

[sub_resource type="Shader" id="Shader_vignette"]
code = "shader_type canvas_item;

uniform vec4 color : source_color = vec4(0.0, 0.0, 0.0, 0.4);
uniform float multiplier = 0.2;
uniform float softness = 1.0;

void fragment() {
	float val = distance(UV, vec2(0.5));
	val = val / multiplier;
	float vignette = smoothstep(0.2, softness, val);
	COLOR = vec4(color.rgb, vignette * color.a);
}"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_vignette"]
shader = SubResource("Shader_vignette")
shader_parameter/color = Color(0, 0, 0, 0.5)
shader_parameter/multiplier = 0.4
shader_parameter/softness = 0.8

[node name="VignetteOverlay" type="CanvasLayer"]
layer = 10

[node name="ColorRect" type="ColorRect" parent="."]
material = SubResource("ShaderMaterial_vignette")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
